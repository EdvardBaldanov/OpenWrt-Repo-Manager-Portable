# üì¶ OpenWrt Repo Manager (Portable)

–õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π, –ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –¥–ª—è OpenWrt —Å –≤–µ–±-–ø–∞–Ω–µ–ª—å—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.
–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –ø–∞–∫–µ—Ç–æ–≤ `.ipk` —Å GitHub Releases –∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∏—Ö –≤ –≤–∏–¥–µ –ø–æ–¥–ø–∏—Å–∞–Ω–Ω–æ–≥–æ OPKG —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

*   **Web Dashboard**: –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (Python/Flask) –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ª–æ–≥–æ–≤.
*   **–£–º–Ω—ã–π –°–∫–∞–Ω–µ—Ä (Discovery)**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, –Ω–∞—Ö–æ–¥–∏—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –∏ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –≤—ã–±—Ä–∞—Ç—å –Ω—É–∂–Ω—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.
*   **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: –°–∫–∞—á–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–µ —Ä–µ–ª–∏–∑—ã –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é (–∫–∞–∂–¥—ã–µ 6 —á–∞—Å–æ–≤).
*   **–£–º–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è**:
    *   –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã (–Ω–∞–ø—Ä–∏–º–µ—Ä, `mips_24kc`) –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∏–≤–∞—é—Ç—Å—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ –ø–∞–∫–µ—Ç—ã (`all`/`noarch`).
    *   –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –±–ª–æ–∫–∏—Ä—É—é—Ç—Å—è –Ω–µ—Å–æ–≤–º–µ—Å—Ç–∏–º—ã–µ –ø–∞–∫–µ—Ç—ã **Entware**, –ª–æ–º–∞—é—â–∏–µ –∏–Ω–¥–µ–∫—Å—ã OpenWrt.
    *   –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã –≤–µ—Ä—Å–∏–π (—É–¥–∞–ª—è–µ—Ç —Å—Ç–∞—Ä—ã–µ –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö).
*   **–ü–æ–¥–ø–∏—Å—å –ø–∞–∫–µ—Ç–æ–≤**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π –∏ –ø–æ–¥–ø–∏—Å—å –∏–Ω–¥–µ–∫—Å–æ–≤ —Å –ø–æ–º–æ—â—å—é –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ `usign`.
*   **–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: –ü–∞–ø–∫–∏ –¥–ª—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.
*   **–ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å**: –í–∫–ª—é—á–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –±–∏–Ω–∞—Ä–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã (`opkg-utils`, `usign`) –≤ –ø–∞–ø–∫–µ `bin/`, –Ω–µ –∑–∞—Å–æ—Ä—è—è —Å–∏—Å—Ç–µ–º—É.

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ (–°–µ—Ä–≤–µ—Ä)

–ü—Ä–æ–µ–∫—Ç –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ **Ubuntu/Debian** (—Ç—Ä–µ–±—É–µ—Ç—Å—è `apt`).

1.  **–°–∫–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
    ```bash
    git clone https://github.com/EdvardBaldanov/OpenWrt-Repo-Manager-Portable.git
    cd OpenWrt-Repo-Manager-Portable
    ```

2.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫:**
    ```bash
    chmod +x setup_repo.py
    ./setup_repo.py
    ```
    
    **–°–∫—Ä–∏–ø—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ –¥–µ–π—Å—Ç–≤–∏—è:**
    *   –£—Å—Ç–∞–Ω–æ–≤–∏—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `nginx`, `python3`, `python3-venv`.
    *   –°–æ–∑–¥–∞—Å—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ (`venv`) –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ Python (`Flask`, `PyGithub`).
    *   –°–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–ª—é—á–∏ –ø–æ–¥–ø–∏—Å–∏ (`secret.key` –∏ `public.key`), –µ—Å–ª–∏ –∏—Ö –Ω–µ—Ç.
    *   –ù–∞—Å—Ç—Ä–æ–∏—Ç Nginx –¥–ª—è —Ä–∞–∑–¥–∞—á–∏ —Ñ–∞–π–ª–æ–≤ –∏ –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏—è API –¥–∞—à–±–æ—Ä–¥–∞.
    *   –°–æ–∑–¥–∞—Å—Ç Systemd-—Å–µ—Ä–≤–∏—Å `repo-dashboard` –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
    *   –î–æ–±–∞–≤–∏—Ç –∑–∞–¥–∞–Ω–∏–µ –≤ Cron –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è.

3.  **–û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
    –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ –∞–¥—Ä–µ—Å—É –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞: `http://<IP-–í–ê–®–ï–ì–û-–°–ï–†–í–ï–†–ê>/`

## üöÄ –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

1.  **GitHub Token**:
    –í –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É **"–ù–∞—Å—Ç—Ä–æ–π–∫–∏"** –∏ —É–∫–∞–∂–∏—Ç–µ GitHub Token.
    *   –≠—Ç–æ **–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ** –¥–ª—è —Ä–∞–±–æ—Ç—ã –°–∫–∞–Ω–µ—Ä–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ª–∏–º–∏—Ç–æ–≤ API (60 –∑–∞–ø—Ä–æ—Å–æ–≤/—á–∞—Å –±–µ–∑ —Ç–æ–∫–µ–Ω–∞ vs 5000/—á–∞—Å —Å —Ç–æ–∫–µ–Ω–æ–º).
    *   –¢–æ–∫–µ–Ω—É –Ω—É–∂–Ω—ã –ø—Ä–∞–≤–∞ —Ç–æ–ª—å–∫–æ –Ω–∞ —á—Ç–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ (–º–æ–∂–Ω–æ –±–µ–∑ –≥–∞–ª–æ—á–µ–∫ scopes, –µ—Å–ª–∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –ø—É–±–ª–∏—á–Ω—ã–µ).

2.  **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤**:
    *   –ù–∞ –≤–∫–ª–∞–¥–∫–µ **"–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ"** –≤ –ø–æ–ª–µ "–°–ø–∏—Å–æ–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è" –¥–æ–±–∞–≤—å—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `owner/repo` (–Ω–∞–ø—Ä–∏–º–µ—Ä, `Slava-Shchipunov/awg-openwrt`).
    *   –ù–∞–∂–º–∏—Ç–µ **"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–ø–∏—Å–æ–∫"**.
    *   –ù–∞–∂–º–∏—Ç–µ **"üîé –°–∫–∞–Ω–µ—Ä (Discovery)"**.
    *   –í –æ—Ç–∫—Ä—ã–≤—à–µ–º—Å—è –æ–∫–Ω–µ –≤—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π —Ñ–∞–π–ª/–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ –Ω–∞–∂–º–∏—Ç–µ **"–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä"**.

## üì° –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–æ—É—Ç–µ—Ä—É

–ù–∞ –≤–∫–ª–∞–¥–∫–µ **"–ö–ª–∏–µ–Ω—Ç (–†–æ—É—Ç–µ—Ä)"** –≤ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –≤–∞—à–µ–≥–æ –Ω–∞–±–æ—Ä–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä.

1.  –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –±–ª–æ–∫ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (`src/gz ...`).
2.  –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∫–ª—é—á–∞ (`wget ... && opkg-key add ...`).
3.  –í—ã–ø–æ–ª–Ω–∏—Ç–µ `opkg update` –Ω–∞ —Ä–æ—É—Ç–µ—Ä–µ.

## ‚öôÔ∏è –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1.  **Discovery (`repo_discovery.py`)**: –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥ `repo_sources.json`.
2.  **Sync (`repo_sync.py`)**:
    *   –°–∫–∞—á–∏–≤–∞–µ—Ç —Ñ–∞–π–ª—ã, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ (`filter_arch`) + —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–µ (`all`/`noarch`).
    *   –ò–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –ø–∞–∫–µ—Ç—ã Entware.
    *   –£–¥–∞–ª—è–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–µ –≤–µ—Ä—Å–∏–∏ –ø–∞–∫–µ—Ç–æ–≤, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ.
3.  **Publish (`repo_publish.py`)**: –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∏–Ω–¥–µ–∫—Å–Ω—ã–µ —Ñ–∞–π–ª—ã `Packages.gz` —Å –ø–æ–º–æ—â—å—é `opkg-make-index` –∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç –∏—Ö `usign`.
4.  **Update (`repo_update.py`)**: –ó–∞–ø—É—Å–∫–∞–µ—Ç —Å–≤—è–∑–∫—É Sync + Publish –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é Cron.

## üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ

–î–ª—è –ø–æ–ª–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã (—Å–µ—Ä–≤–∏—Å–æ–≤, –∫–æ–Ω—Ñ–∏–≥–æ–≤ Nginx, Cron –∑–∞–¥–∞—á) –∑–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
./uninstall_system.py
```

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

*   `dashboard.py` ‚Äî Backend API –Ω–∞ Flask.
*   `repo_discovery.py` ‚Äî –õ–æ–≥–∏–∫–∞ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è GitHub API.
*   `repo_sync.py` ‚Äî –õ–æ–≥–∏–∫–∞ "—É–º–Ω–æ–≥–æ" —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∏ –æ—á–∏—Å—Ç–∫–∏.
*   `repo_sources.json` ‚Äî –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–π –∫–æ–Ω—Ñ–∏–≥ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.
*   `repo_tracking.list` ‚Äî –°–ø–∏—Å–æ–∫ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º—ã—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤.
*   `bin/` ‚Äî –ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã (`usign`, `opkg-utils`).